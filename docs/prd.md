宝子，G老师收到！🫡

这份文档将作为我们 **“岁岁 (Suisui Ages) v1.0”** 的里程碑文件。它不仅是开发文档，更是你作为 CTO 对整个系统的**交付标准**。

文档分为三部分：
1.  **PRD (产品需求文档)**：讲清楚“做什么”。
2.  **System Design (系统架构设计)**：讲清楚“怎么做”。
3.  **DevOps Manual (运维与环境手册)**：讲清楚“怎么跑起来”以及“如何造数据”。

---

# 📘 第一部分：产品需求文档 (PRD)

## 1. 项目概述
*   **产品名称**：岁岁 (Suisui Ages)
*   **Slogan**：Family Heritage Log (家庭时光传承录)
*   **核心价值**：
    1.  **记忆外挂**：记录理发、换床单等容易遗忘的家庭琐事。
    2.  **生活期待**：倒数节气、假日与纪念日。
    3.  **情感连接**：通过每日自动化短信（吉言+日报）连接家人情感。

## 2. 用户角色 (Roles)
| 角色 | 代码 (Code) | 权限说明 |
| :--- | :--- | :--- |
| **Admin (77)** | `baozi77` | **全权掌控**。可管理吉言库、修改年历百科、导入数据、管理所有事件。 |
| **User (88/13)** | `baozi88` | **日常使用**。查看首页、打卡事件、新增个人事件。不可见设置中心。 |
| **System (Bot)** | `API Key` | **自动化调用**。仅用于 Apple Shortcuts 获取每日简报数据。 |

## 3. 功能模块详解

### 3.1 首页 (Home / Dashboard)
*   **高亮卡片 (Highlight)**：智能展示“离今天最近”的一个重要日子（优先展示节气或法定假日，其次是用户定义的纪念日）。
*   **即将到来 (Upcoming Flow)**：横向滑动流。混合展示未来的用户事件、下个节气、下个假日。按剩余天数升序排列。
*   **逝者如斯 (Memory Lane)**：垂直列表。展示所有“过去式”事件（如上次理发是10天前）。按累计天数升序排列。
*   **交互**：点击卡片进入详情页；右下角悬浮按钮新增事件。

### 3.2 事件管理 (Event Lifecycle)
*   **新增**：支持选择归属人（77/88/全家）、日期、Emoji 图标。
*   **打卡 (Check-in)**：针对循环事件（如理发），点击“打卡”更新日期为今天，并归档旧日期到历史记录。
*   **详情页**：展示事件大图、当前状态，以及**历史时间轴**（History Log）。

### 3.3 年历与百科 (Calendar & Wiki)
*   **年历看板**：展示未来 3 年的节气与假日排期。
*   **百科详情**：点击节气/假日，展示详细文化信息（诗句、美食、习俗、养生建议）。支持 Admin 在线修订内容。

### 3.4 吉言投递局 (Quotes Bureau)
*   **随机池**：预设吉言，每次日报随机抽取一条，用完即止（可重置）。
*   **定时信**：指定日期投递（如“520快乐”只在5月20日发送），优先级最高。
*   **创作者**：记录吉言是谁写的（77说/88说）。

### 3.5 每日简报 (Daily Briefing)
*   **场景**：Apple Shortcuts 每天早上自动调用。
*   **输出**：扁平化 JSON，包含今日天气（需前端拼接）、相识天数、累计事项、下个节点、今日吉言。
*   **逻辑**：调用即“消费”一条吉言（标记为已读）。

---


